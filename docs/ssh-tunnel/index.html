<!doctype html><html lang=en-US><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Define automated SQL checks against your production databases and get proactive alerts when the data starts to look wrong."><meta name=author content="QueryCanary"><meta name=theme-color content="#ffffff" media="(prefers-color-scheme: light)"><meta name=theme-color content="#101010" media="(prefers-color-scheme: dark)"><title>SSH Tunnel · QueryCanary Docs</title>
<link rel=canonical href=/docs/ssh-tunnel/><link rel=stylesheet href=/assets/css/docs.min.8e9408609771a441499aa5571a4585b0ca95783b842d5c758af5eef1457b0fe0.css integrity><link rel=manifest href=/manifest.json><link rel=icon href=/favicon/favicon.ico><link rel=icon href=/favicon/favicon-16x16.png sizes=16x16 type=image/png><link rel=icon href=/favicon/favicon-32x32.png sizes=32x32 type=image/png><link rel=apple-touch-icon href=/favicon/apple-touch-icon.png sizes=180x180><script async src="https://www.googletagmanager.com/gtag/js?id=-"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","-")</script></head><body><div id=outer-wrapper><div id=aside-wrapper><aside><div><button class=btn><i>❌</i>Close</button></div><a href=/ class=site-logo>QueryCanary Docs</a><nav role=navigation><details open><summary>Documentation</summary><ul><li><a href=/docs/overview/>Overview</a></li></ul></details><details open><summary>Servers</summary><ul><li><a class=active href=/docs/ssh-tunnel/>SSH Tunnel</a></li></ul></details></nav></aside></div><div id=content-wrapper><header><a href=/ class=site-logo>QueryCanary Docs</a></header><main><article><nav><button class=btn><i>⬅️</i> On this section</button>
<button class=btn>On this page <i>➡️</i></button></nav><header><h1>SSH Tunnel</h1><p></p></header><div id=article-body><p>SSH tunnels provide a secure way to connect to your database by routing traffic through an intermediary SSH server. This ensures that sensitive data is encrypted and protected during transit.</p><p>It&rsquo;s an easy way to connect QueryCanary to your production database servers, without exposing them to the public web.</p><h3 id=what-is-a-ssh-tunnel>What is a SSH Tunnel?</h3><p>An SSH tunnel creates a secure connection between QueryCanary.com&rsquo;s runner machines and your remote server. It forwards a local port to a target database port on the remote server, allowing you to securely access the database as if it were running locally.</p><h3 id=when-to-use-a-ssh-tunnel>When to use a SSH Tunnel?</h3><ul><li><strong>Secure Connections</strong>: When your database is not directly accessible over the internet.</li><li><strong>Firewall Restrictions</strong>: When the database is only accessible from a specific SSH server.</li><li><strong>Extra Security</strong>: To encrypt database traffic and prevent unauthorized access.</li></ul><h3 id=configuration>Configuration</h3><h4 id=1gather-required-information>1. <strong>Gather Required Information</strong></h4><p>Before setting up an SSH tunnel, ensure you have the following details:</p><ul><li><p><strong>SSH Server Information</strong>:</p><ul><li>Hostname or IP address of the SSH server.</li><li>Port number (default is <code>22</code>).</li><li>Username for SSH authentication.</li></ul></li><li><p><strong>Database Information</strong>:</p><ul><li>Hostname or IP address of the database (from the SSH server&rsquo;s perspective).</li><li>Port number (e.g., <code>5432</code> for PostgreSQL, <code>3306</code> for MySQL).</li></ul></li></ul><h4 id=2enable-ssh-tunnel-in-querycanary>2. <strong>Enable SSH Tunnel in QueryCanary</strong></h4><p>When adding or editing a server in QueryCanary, enable the SSH tunnel and provide the required details:</p><table><thead><tr><th>Field Name</th><th>Description</th></tr></thead><tbody><tr><td><strong>SSH Hostname</strong></td><td>The hostname or IP address of the SSH server.</td></tr><tr><td><strong>SSH Port</strong></td><td>The port of the SSH server (default: <code>22</code>).</td></tr><tr><td><strong>SSH Username</strong></td><td>The username to authenticate with the SSH server.</td></tr></tbody></table><p>We&rsquo;ll save those details and provide you a SSH public key to add to your server.</p><p>Here&rsquo;s a configuration example:</p><ul><li><p><strong>SSH Server</strong>:</p><ul><li>Hostname: <code>ssh.example.com</code></li><li>Port: <code>22</code></li><li>Username: <code>ssh_user</code></li></ul></li></ul><h4 id=3-add-the-generated-public-key-to-your-server>3. Add the generated public key to your server</h4><p>QueryCanary will generate each server a unique SSH public key to authorize it&rsquo;s connection to your SSH server. This makes it easy to track & manage the permissions QueryCanary has, which should be extremely limited.</p><p>On your SSH server:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Create the SSH folder if necessary</span>
</span></span><span class=line><span class=cl>mkdir -p ~/.ssh
</span></span><span class=line><span class=cl>chmod <span class=m>700</span> ~/.ssh
</span></span><span class=line><span class=cl>touch ~/.ssh/authorized_keys
</span></span><span class=line><span class=cl>chmod <span class=m>600</span> ~/.ssh/authorized_keys
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Edit the authorized keys file to add our public key</span>
</span></span><span class=line><span class=cl>nano ~/.ssh/authorized_keys
</span></span></code></pre></div><p>Add the QueryCanary SSH key, it should look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ecdsa-sha2-nistp256 <span class=nv>SoMElOnGVALue</span><span class=o>==</span> querycanary.com 
</span></span></code></pre></div><p>You can then test the connection to ensure it&rsquo;s properly setup.</p><h3 id=common-issues>Common Issues</h3><ol><li><p><strong>Failed to Connect to SSH Server</strong>:</p><ul><li>Verify the SSH hostname, port, and username.</li><li>Ensure the SSH server is reachable from the QueryCanary server.</li></ul></li><li><p><strong>Invalid SSH Key</strong>:</p><ul><li>Verify that your servers uniquely generated public key is added to the SSH server&rsquo;s <code>authorized_keys</code> file.</li></ul></li><li><p><strong>Database Connection Issues</strong>:</p><ul><li>Ensure the database hostname and port are correct from the SSH server&rsquo;s perspective.</li><li>Verify that the database allows connections from the SSH server.</li></ul></li></ol><p>By following this guide, you can securely connect to your database using SSH tunnels in QueryCanary.</p></div><footer><time datetime=2025-05-25><i>🕒</i> Updated: 2025-05-25</time>
<a href=/docs/overview/><i>﹤</i> Previous</a>
<a class=hidden>Next <i>﹥</i></a></footer></article><aside><div><button class=btn><i>❌</i>Close</button></div><strong>On this page</strong><nav id=TableOfContents><ul><li><ul><li><a href=#what-is-a-ssh-tunnel>What is a SSH Tunnel?</a></li><li><a href=#when-to-use-a-ssh-tunnel>When to use a SSH Tunnel?</a></li><li><a href=#configuration>Configuration</a></li><li><a href=#common-issues>Common Issues</a></li></ul></li></ul></nav></aside></main><footer><div><i>🧑‍💻</i>Built by and copyright<a href=https://querycanary.com target=_blank>QueryCanary</a><i>📅</i> 2025<i>🚀</i> <a href=https://github.com/QueryCanary/docs.querycanary.com target=_blank>GitHub</a></div><div><button class=btn><i>☀️</i><i>⁄</i><i>🌑</i></button></div></footer></div></div><div id=body-model-outer></div><script type=text/javascript src=/assets/js/docs.min.12ffdc25c0149ef34e761ee54587f2aae17affcb8375298ad2180851930cb142.js integrity></script></body></html>